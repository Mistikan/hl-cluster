---
apiVersion: v1
kind: Pod
metadata:
  name: test-dri
  namespace: default
spec:
  containers:
  - name: test-dri
    image: lscr.io/linuxserver/rdesktop:amd64-ubuntu-xfce
    command:
      # - "/config/startwm.sh"
      # - "/usr/bin/startxfce4"
      - "/bin/bash"
    args:
    - "-c"
    - "sleep infinity"
    # startxfce4
    # securityContext:
    #   privileged: true
    volumeMounts:
    # - mountPath: /dev
    #   name: dev
    #   readOnly: true
    - mountPath: /run/udev/data
      name: run-udev-data
      readOnly: true
    # - mountPath: /sys
    #   name: sys
    #   readOnly: true
    resources:
      limits:
        squat.ai/dri: 1
        squat.ai/input: 1
    #     squat.ai/udev: 1
        # squat.ai/tty: 1
  volumes:
  # - hostPath:
  #     path: /dev
  #     type: ""
  #   name: dev
  - hostPath:
      path: /run/udev/data
      type: ""
    name: run-udev-data
  # - hostPath:
  #     path: /sys
  #     type: ""
  #   name: sys
# apt-get update && apt-get install xinit xserver-xorg-input-all evtest xinput -y
# apt-get install -y --no-install-recommends xserver-xorg-input-evdev xserver-xorg-input-all
# xinput list
# startxfce4